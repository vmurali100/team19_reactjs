<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Website</title>
    <link rel="stylesheet" href="./RegisterPage.css">
</head>

<body>

    <header>
        <h1>Raju tech Pvt Ttd</h1>
    </header>

    <nav>
        <a href="javascript:void(0);" onclick="navigateTo('register')">Register User</a>
        <a href="javascript:void(0);" onclick="navigateTo('userList')">User List</a>
    </nav>

    <div class="content" id="mainContent">
        <div class="formbold-main-wrapper">          
            <div class="formbold-form-wrapper">
                <table id="tableDiv">
                    <thead>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Age</th>
                        <th>Your best option</th>
                        <th>Recommendation</th>
                        <th>Skills</th>
                        <th>Suggestions</th>
                        <th>Edit</th>
                    </thead>
                    <tbody>
                    </tbody>
                </table>

                <form id="registrationForm" onsubmit="return validateForm(event)">
                    <div class="formbold-input-group">
                        <label for="name" class="formbold-form-label">Name</label>
                        <input type="text" name="name" id="name" placeholder="Enter your name"
                            class="formbold-form-input" />
                        <p id="nameErrorMessage" style="color: red;"></p>
                    </div>

                    <div class="formbold-input-group">
                        <label for="email" class="formbold-form-label">Email</label>
                        <input type="email" name="email" id="email" placeholder="Enter your email"
                            class="formbold-form-input" />
                        <p id="emailErrorMessage" style="color: red;"></p>
                    </div>

                    <div class="formbold-input-group">
                        <label for="age" class="formbold-form-label">Age</label>
                        <input type="text" name="age" id="age" placeholder="Enter your age"
                            class="formbold-form-input" />
                        <p id="ageErrorMessage" style="color: red;"></p>
                    </div>

                    <div class="formbold-input-group">
                        <label class="formbold-form-label">Which option best describes you?</label>
                        <select class="formbold-form-select" name="occupation" id="occupation">
                            <option value="">Choose your occupation</option>
                            <option value="Student">Student</option>
                            <option value="designer">UX/UI Designer</option>
                            <option value="fullstack">Full Stack Developer</option>
                            <option value="frontend">Front End Developer</option>
                        </select>
                        <p id="occupationErrorMessage" style="color: red;"></p>
                    </div>

                    <div class="formbold-input-radio-wrapper">
                        <label class="formbold-form-label">Would you recommend our site to a friend?</label>
                        <div class="formbold-radio-flex">
                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label">
                                    <input class="formbold-input-radio" type="radio" name="ans" value="Yes" />
                                    Yes
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>
                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label">
                                    <input class="formbold-input-radio" type="radio" name="ans" value="No" />
                                    No
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>
                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label">
                                    <input class="formbold-input-radio" type="radio" name="ans" value="Maybe" />
                                    Maybe
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>
                        </div>
                        <p id="recommendationErrorMessage" style="color: red;"></p>
                    </div>


                    <div class="formbold-input-radio-wrapper">
                        <label class="formbold-form-label">
                            Which languages & freameworks you know?
                        </label>

                        <div class="formbold-radio-flex">
                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="c">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="c" value="C" />
                                    C
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>

                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="c++">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="c++"
                                        value="C++" />
                                    c++
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>

                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="java">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="java"
                                        value="Java" />
                                    Java
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>

                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="python">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="python"
                                        value="Python" />
                                    Python
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>

                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="javaScript">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="javaScript"
                                        value="JavaScript" />
                                    JavaScript
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>

                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="react">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="react"
                                        value="React" />
                                    React
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>

                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="angular">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="angular"
                                        value="Angular" />
                                    Angular
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>

                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="django">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="django"
                                        value="Django" />
                                    Django
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>

                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="tailwind">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="tailwind"
                                        value="Tailwind CSS" />
                                    Tailwind CSS
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>

                            <div class="formbold-radio-group">
                                <label class="formbold-radio-label" for="bootstrap">
                                    <input class="formbold-input-radio" type="radio" name="skills" id="bootstrap"
                                        value="Bootstrap" />
                                    Bootstrap
                                    <span class="formbold-radio-checkmark"></span>
                                </label>
                            </div>
                        </div>
                        <p id="skillsErrorMessage" style="color: red;"></p>

                    </div>

                    <div>
                        <label for="message" class="formbold-form-label">Any comments or suggestions</label>
                        <textarea rows="6" name="message" id="suggestions" placeholder="Type here..."
                            class="formbold-form-input"></textarea>
                        <p id="suggestionsErrorMessage" style="color: red;"></p>
                    </div>

                    <button id="submitBtn" class="formbold-btn" type="submit"  >Submit</button>
                    <button id="updateBtn" onclick="updateUser()">Update</button>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; Raju tech Pvt Ttd. All rights reserved.</p>
    </footer>

    <script>
        function validateForm(event) {
            event.preventDefault();

            var name = document.getElementById("name").value;
            var email = document.getElementById("email").value;
            var age = document.getElementById("age").value;
            var occupation = document.getElementById("occupation").value;
            var ans = document.querySelector('input[name="ans"]:checked');
            var skills = document.querySelector('input[name="skills"]:checked');
            var suggestions = document.getElementById("suggestions").value;


            document.getElementById("nameErrorMessage").innerHTML = "";
            document.getElementById("emailErrorMessage").innerHTML = "";
            document.getElementById("ageErrorMessage").innerHTML = "";
            document.getElementById("occupationErrorMessage").innerHTML = "";
            document.getElementById("recommendationErrorMessage").innerHTML = "";
            document.getElementById("skillsErrorMessage").innerHTML = "";
            document.getElementById("suggestionsErrorMessage").innerHTML = "";

            var isValid = true;

            if (name.trim() === "") {
                document.getElementById("nameErrorMessage").innerHTML = "Name is required";
                isValid = false;
            }

            if (email.trim() === "") {
                document.getElementById("emailErrorMessage").innerHTML = "Email is required";
                isValid = false;
            }

            if (age.trim() === "") {
                document.getElementById("ageErrorMessage").innerHTML = "Age is required";
                isValid = false;
            }

            if (occupation === "") {
                document.getElementById("occupationErrorMessage").innerHTML = "Please select an occupation";
                isValid = false;
            }

            if (!ans) {
                document.getElementById("recommendationErrorMessage").innerHTML = "Please select a recommendation";
                isValid = false;
            }

            if (!skills) {
                document.getElementById("skillsErrorMessage").innerHTML = "Please select at least one skill";
                isValid = false;
            }


            if (!isValid) {
                return false;
            }

            PostUser();
            // return false; 
        }

        function PostUser() {
            var Users = {
                name: document.getElementById("name").value,
                email: document.getElementById("email").value,
                age: document.getElementById("age").value,
                occupation: document.getElementById("occupation").value,
                suggestions: document.getElementById("suggestions").value
            };
            var recomendSiteToFriend = document.getElementsByName("ans");
            for (let i = 0; i < recomendSiteToFriend.length; i++) {
                if (recomendSiteToFriend[i].checked) {
                    Users.recomendations = recomendSiteToFriend[i].value;
                }
            }
            var allSkills = document.getElementsByName("skills");
            for (let index = 0; index < allSkills.length; index++) {
                if (allSkills[index].checked) {
                    Users.skills = allSkills[index].value;
                }
            }

            fetch("http://localhost:3000/Users", {
                method: "POST",
                body: JSON.stringify(Users),
                headers: {
                    "Content-Type": "application/json; charset=UTF-8"
                }
            }) .then(response => {
            if (response.ok) {
                navigateTo('userList');
            } else {
                console.error('Error posting user data');
            }
        });;
        }

    </script>
    <script src="UserList.js"></script>
    <script src="./Navigatin.js"></script>
    <script src="./EditFun.js"></script>

</body>

</html>