<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        #updateBtn{
            display: none;
        }
    </style>
    <title>Document</title>
</head>

<body>
    <form>
        <label for="id">ID </label>
        <input type="text" name="" id="id"> <br>
        <label for="id">Email </label>
        <input type="text" name="" id="email"> <br>
        <label for="id">Username </label>
        <input type="text" name="" id="username"> <br>
        <label for="id">Password </label>
        <input type="text" name="" id="password"> <br>
        <button type="button" onclick="createUser()" id="addBtn">Add User </button>
        <button type="button" onclick="updateUser()" id="updateBtn">Update User </button>
    </form>
    <table border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Email</th>
                <th>Username</th>
                <th>Password</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <script>
        var gIndex = null;
        var students = [
            {
                "id": 61,
                "email": "DVanatta@fringilla.net",
                "username": "FHerrick",
                "password": "xGrKC"
            },
            {
                "id": 62,
                "email": "RForenda@sapien.io",
                "username": "ISpellicy",
                "password": "ODqoB"
            },
            {
                "id": 63,
                "email": "MMcintyre@molestie.gov",
                "username": "ESalter",
                "password": "4WVnJ"
            },
            {
                "id": 64,
                "email": "VBriley@egestas.com",
                "username": "EBrill",
                "password": "N8AfR"
            },
            {
                "id": 65,
                "email": "JConk@eget.com",
                "username": "LFreeburg",
                "password": "rKbDU"
            }
        ]

        console.log(students.length)
      function displayStudents(){
        document.querySelector('tbody').innerHTML = ""
        for(i=0;i<students.length;i++){
            var myTr = document.createElement("tr");
            console.log(students[i])
            for(a in students[i]){
                var td = document.createElement('td');
                td.innerHTML = students[i][a]
                myTr.appendChild(td)
            }
            var editTd = document.createElement("td")
            var deleteTd = document.createElement("td")

            var editBtn = document.createElement("button");
            editBtn.innerHTML = "Edit"
            editBtn.setAttribute("onClick","editUser("+i+")")
            var deleteBtn = document.createElement("button");
            deleteBtn.innerHTML = "Delete"
            deleteBtn.setAttribute("onClick","deleteUser("+i+")")
        
            editTd.appendChild(editBtn);
            deleteTd.appendChild(deleteBtn)
            myTr.appendChild(editTd)
            myTr.appendChild(deleteTd)
            document.querySelector("tbody").appendChild(myTr)
        }

      }

        function deleteUser(i){
            students.splice(i,1)
            displayStudents()
        }
        function editUser(index){
            gIndex = index;
            console.log(students[index])
            var student = students[index]
            document.getElementById("id").value=student.id;
            document.getElementById("email").value=student.email;
            document.getElementById("username").value=student.username;
            document.getElementById("password").value=student.password;

            document.getElementById("updateBtn").style.display ="block"
            document.getElementById("addBtn").style.display ="none"
        }
        displayStudents()
        function clearUser(){
            document.getElementById("id").value='';
            document.getElementById("email").value="";
            document.getElementById("username").value="";
            document.getElementById("password").value=""
        }
        function createUser(){
            var user = {
                id:document.getElementById("id").value,
                email:document.getElementById("email").value,
                username:document.getElementById("username").value,
                password:document.getElementById("password").value
            }
            students.push(user)
            displayStudents()
            clearUser()
        }

        function updateUser(){
            var user = {
                id:document.getElementById("id").value,
                email:document.getElementById("email").value,
                username:document.getElementById("username").value,
                password:document.getElementById("password").value
            }
            students[gIndex] = user;
            displayStudents();
            clearUser();
            document.getElementById("updateBtn").style.display ="none"
            document.getElementById("addBtn").style.display ="block"
        }
    </script>
</body>

</html>